<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Calories</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./assets/style.css">
</head>

<body>
  <header>
    <h1 id="Title">Nutrition Tracker</h1>
    <h2 id="slogan">Stop being fat</h2>
    <form name="daySelect">
      <select id="daySelector" onchange='changeDay($("#daySelector").val())'>
        <option value="0">Sunday</option>
        <option value="1">Monday</option>
        <option value="2">Tuesday</option>
        <option value="3">Wednesday</option>
        <option value="4">Thursday</option>
        <option value="5">Friday</option>
        <option value="6">Saturday</option>
      </select>
    </form>
  </header>


  <main id="Container_Main">
    <section id="Area_input" class="cardContainer">
      <div id="CardTitleArea">
        <div class="cardtitlestyle" id="MainDayofWeek"></div>
        <!-- <div id="Maintime"></div> -->
      </div>
      <div class="inputSection">
        <div id="sectionArea">
          <textarea name="inputTextArea" id="inputTextArea" cols="20" rows="5"
            placeholder="4oz of carrots and a Chicken sandwich"></textarea>
        </div>
        <div id="buttonArea">
          <button id="breakfastbtn">Breakfast</button>
          <button id="lunchbtn">Lunch</button>
          <button id="dinnerbtn">Dinner</button>
        </div>
      </div>

    </section>

    <Section id="NutritionInfo" class="cardContainer">
      <div id="CardTitleArea">
        <div class="cardtitlestyle">Nutrition Info</div>
      </div>
      <div class="nutritionContainer">
        <div class="nutritionContainer">
          <div id="CalContain">
            <h4 id="NutrTitle">Nutrition Facts</h4>
            <h6>Amount Per Serving</h6>
            <h4>Calories</h4>
            <div id="calories">477.8</div>
            <div style="font-size: x-large;">Ingredients:</div>
            <div id="name" class="Ingredients">carrots chicksandwich</div>
          </div>

          <div id="infoContain1">
            <div class="nutlablesection">
              <span class="nutLable_bold">Total Fat</span>
              <span id="fat_total_g">2.3</span>
              <span class="unit">g</span>
            </div>

            <div class="nutlablesection">
              <span class="nutLable_reg">Saturated Fat</span>
              <span id="fat_saturated_g">0.3</span>
              <span class="unit">g</span>
            </div>


            <div class="nutlablesection">
              <span class="nutLable_bold">Cholesterol</span>
              <span id="cholesterol_mg">0</span>
              <span class="unit">mg</span>
            </div>
            <div class="nutlablesection">
              <span class="nutLable_bold">Sodium</span>
              <span id="sodium_mg">775</span>
              <span class="unit">mg</span>
            </div>

            <div class="nutlablesection">
              <span class="nutLable_bold">Total Carbohydrates</span>
              <span id="carbohydrates_total_g">110.2</span>
              <span class="unit">g</span>
            </div>


            <div class="nutlablesection">
              <span class="nutLable_reg">Dietary Fiber</span>
              <span id="fiber_g">40.7</span>
              <span class="unit">g</span>
            </div>
            <div class="nutlablesection">
              <span class="nutLable_reg">Total Sugar</span>
              <span id="sugar_g">46.7</span>
              <span class="unit">g</span>
            </div>


            <div class="nutlablesection">
              <span class="nutLable_bold">Protein</span>
              <span id="protein_g">10.3</span>
              <span class="unit">g</span>
            </div>

            <div class="nutlablesection">
              <span class="nutLable_reg">Potassium</span>
              <span id="potassium_mg">410</span>
              <span class="unit">mg</span>
            </div>

            <div class="nutlablesection">
              <span class="nutLable_reg">Serving Size:</span>
              <span id="serving_size_g">1360.77</span>
              <span class="unit">g</span>
            </div>
          </div>
          <div id="infoContian2">

            <style type="text/css">
              .chartBox {
                width: 100px;
              }
            </style>
            </head>

            <body>

              <div style="width:300px; height: 300px;" class="chartBox">
                <canvas id="myChart3"></canvas>
              </div>

              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

              <script>
                // block
                //const data3 ={

                //};
                //config block
                //render block

                let TotalCalories = 2500;
                let calorieIntake = 477.8;

                let caloriesLeft = TotalCalories - calorieIntake;
                const ctx3 = document.getElementById('PieChart').getContext('2d');

                let pieChart3 = new Chart(ctx3, config3);
                
                
                const config3 = {
                  type: 'pie',
                  data: {
                    labels: ['Calories Consumed', 'Calories Left'],
                    datasets: [{
                      label: '# of Calories',
                      data: [calorieIntake, caloriesLeft],

                      borderWidth: 1,
                    }],
                    options: {
                      plugins: {
                        legend: {
                          display: false
                        }
                      }
                    }
                  }

                }
              </script>


          </div>

        </div>
    </Section>

  </main>

  <section id="weekSchedule">
    <div class="daysContainBox" id="day0">
      <h3 class="TitleHead">SUNDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">800</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">900</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">150</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">1390 CAL</div>
      </div>
    </div>
    <div class="daysContainBox" id="day1">
      <h3 class="TitleHead">MONDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">200</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">150</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">400</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">750 CAL</div>
      </div>
    </div>
    <div class="daysContainBox" id="day2">
      <h3 class="TitleHead">TUESDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">90</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">650</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">400</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">1140 CAL</div>
      </div>
    </div>
    <div class="daysContainBox" id="day3">
      <h3 class="TitleHead">WEDNESDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">290</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">320</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">600</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">1210 CAL</div>
      </div>
    </div>
    <div class="daysContainBox" id="day4">
      <h3 class="TitleHead">THURSDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">350</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">500</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">800</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">1650 CAL</div>
      </div>
    </div>
    <div class="daysContainBox" id="day5">
      <h3 class="TitleHead">FRIDAY</h3>
      <div class="mealsContain">
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">100</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">200</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">180</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">480 CAL</div>
      </div>
    </div>

    <div class="daysContainBox" id="day6">
      <h3 class="TitleHead">SATURDAY</h3>
      <div class="mealsContain">nut
        <div class="meal" id="breakfast">
          <div class="dayMealTitle">B</div>
          <div class="mealcalContainer">
            <div class="mealCal">320</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="lunch">
          <div class="dayMealTitle">L</div>
          <div class="mealcalContainer">
            <div class="mealCal">200</div>
            <div class="units">Cal</div>
          </div>
        </div>
        <div class="meal" id="dinner">
          <div class="dayMealTitle">D</div>
          <div class="mealcalContainer">
            <div class="mealCal">300</div>
            <div class="units">Cal</div>
          </div>
        </div>
      </div>
      <div class="mealtotal">
        <div>Total</div>
        <div class="dayMealtotal">820 CAL</div>
      </div>
    </div>




  </section>

  <section id="lineGraph" style="width: 2000px; height:3000px;">
    <style>
      * {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }

      .chartMenu {
        width: 100%;
        height: 100%;
        background: #1A1A1A;
        color: rgb(102, 235, 54);
      }

      .chartMenu p {
        padding: 10px;
        font-size: 20px;
      }

      .chartCard {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 100%;
        height: 100%;
        background: rgba(54, 162, 235, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chartBox {
        width: 2000px;
        height: 100%;
        padding-top: 20px;
        border-radius: 20px;
        /* border: solid 3px rgb(235, 130, 54); */
        background: white;
      }
    </style>

    <div class="chartCard">
      <div class="chartBox">
        <canvas id="myChart"></canvas>
      </div>
      <div class="chartBox">
        <canvas id="myChart2"></canvas>
      </div>

    </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
    <script>
      // setup 

      // Get the total calories from each day
      // Create an empty array to store the integer parts
      var dayMealtotal = [];

      // Loop through the divs from day0 to day2
      for (var i = 0; i <= 6; i++) {
        // Get the dayMealtotal element by its ID
        var dayMealtotalElement = document.getElementById("day" + i).querySelector(".dayMealtotal");

        // Get the innerHTML value and extract the integer part
        var dayMealtotalValue = parseInt(dayMealtotalElement.innerHTML);

        // Add the integer part to the array
        dayMealtotal.push(dayMealtotalValue);
      }

      // Print the array values
      console.log(dayMealtotal);


      const data = {
        labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        datasets: [{
          label: 'Weekly Calories',
          data: [
            { x: 'Sun', y: dayMealtotal[0], sales: [1, 1, 1, 1, 1, 1, 8], title: 'Sunday' },
            { x: 'Mon', y: dayMealtotal[1], sales: [1, 1, 1, 1, 1, 1, 1], title: 'Monday' },
            { x: 'Tue', y: dayMealtotal[2], sales: [1, 1, 1, 1, 1, 1, 2], title: 'Tuesday' },
            { x: 'Wed', y: dayMealtotal[3], sales: [1, 1, 1, 1, 1, 1, 3], title: 'Wednesday' },
            { x: 'Thu', y: dayMealtotal[4], sales: [1, 1, 1, 1, 1, 1, 4], title: 'Thursday' },
            { x: 'Fri', y: dayMealtotal[5], sales: [1, 1, 1, 1, 1, 1, 5], title: 'Friday' },
            { x: 'Sat', y: dayMealtotal[6], sales: [1, 1, 1, 1, 1, 1, 6], title: 'Saturday' },
          ],

          backgroundColor: [
            'rgba(255, 26, 104, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(0, 0, 0, 0.2)'
          ],
          borderColor: [
            'rgba(255, 26, 104, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)',
            'rgba(0, 0, 0, 1)'
          ],
          borderWidth: 1
        }]
      };

      function getMealCalValues(dayId) {
        const dayElement = document.getElementById(dayId);
        const mealElements = dayElement.querySelectorAll('.meal');

        const mealCalValues = {};

        mealElements.forEach(mealElement => {
          const dayMealTitleElement = mealElement.querySelector('.dayMealTitle');
          const mealCalElement = mealElement.querySelector('.mealCal');

          if (dayMealTitleElement && mealCalElement) {
            const dayMealTitle = dayMealTitleElement.textContent.trim();
            const mealCalValue = parseInt(mealCalElement.textContent.trim(), 10);

            // Ensure that dayMealTitle is one of 'B', 'L' or 'D'
            if (['B', 'L', 'D'].includes(dayMealTitle)) {
              mealCalValues[dayMealTitle] = mealCalValue;
            }
          }
        });

        return mealCalValues;
      }

      console.log(getMealCalValues('day0'));


      var chart1 = new Chart(document.getElementById('myChart').getContext('2d'), {
        type: 'bar',
        data: data,
        options: {
          onClick: function (event, elements, chart) {
            if (elements.length > 0) { // If a bar is clicked
              var index = elements[0].index; // Get the index of clicked bar
              var label = chart.data.labels[index]; // Get the label of clicked bar
              // Now create second chart using the label to pick the detail data
              var cal = getMealCalValues(`day${index}`)
              if (chart2) {
                chart2.destroy(); // Destroy current detail chart if it exists
              }
              chart2 = new Chart(document.getElementById('myChart2').getContext('2d'), {
                type: 'bar',
                data: {
                  labels: ['Breakfast', 'Lunch', 'Dinner'],
                  datasets: [{
                    data: [cal['B'], cal['L'], cal['D']],
                    backgroundColor: 'Yellow'
                  }],
                  label: `Daily Calories`
                }, // Use the label to get the corresponding detail data
                options: {}
              });
            }
          }
        }
      });

      var chart2;
      // setup

    </script>

    </script>







  </section>









  <script src="./assets/chartData.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.3/dayjs.min.js"
    integrity="sha256-iu/zLUB+QgISXBLCW/mcDi/rnf4m4uEDO0wauy76x7U=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./assets/foodScript.js"></script>
  <script src="./assets/WeeklySch.js"></script>
  <script src="./assets/temp.js"></script>


</body>

</html>